{
    debug
	nats {
		server {
			name srv-01
			port 4222
			http_port 8222
			system_account SYS
			accounts {
				SYS {
					export_service "$SYS.REQ.SERVER.PING" to MONITORING
				}
				MONITORING {
					map_subject "test.>" to "test2.>"
					map_subject "foo.>" {
						to "foo.v1.>" weight 50
						to "foo.v2.>" weight 50
					}
					import_service "$SYS.REQ.SERVER.PING" from SYS
				}
			}
			jetstream
			mqtt {
				port 1883
			}
			leafnodes {
				port 7422
			}
			websocket {
				port 10443
                no_tls
			}
		}
		auth_service {
			default deny
			policy {
				match {
					token monitoring
				}
				callout allow {
					account MONITORING
                    template {
                        allow_pub ">"
                        allow_sub ">"
                    }
				}
			}
			policy {
				match {
					token APP
				}
				callout allow {
					account APP
				}
			}
            policy {
                match {
                    token SYS
                    host 10.100.100.1
                }
                callout allow {
                    account SYS
                }
            }
		}
	}
}
